<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MNIST – CNN Denoiser Autoencoder (TF.js)</title>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@latest"></script>

  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:20px}
    h1{margin-top:0}
    button,input[type=file]{margin:4px 0;padding:6px 10px}
    .layout{display:flex;gap:24px}
    .col{flex:1 1 0}
    .status{background:#f5f5f5;padding:8px;margin:6px 0;border:1px solid #ddd}
    .preview-row{display:flex;gap:12px;margin:6px 0}
    .preview-row canvas{border:1px solid #888;width:112px;height:112px} /* 28×4 */
    #preview-wrapper{border:1px solid #ddd;padding:8px}
    #preview-wrapper h3{margin:4px 0}
  </style>
</head>
<body>
<h1>MNIST Denoiser Autoencoder (client-side)</h1>

<!-- csv -->
<label>Train&nbsp;CSV <input type="file" id="trainFile" accept=".csv"></label>
<label>Test&nbsp;CSV  <input type="file" id="testFile"  accept=".csv"></label>
<button id="loadData">Load&nbsp;Data</button>

<div class="layout">
  <div class="col">
    <h2>Controls</h2>
    <button id="trainBtn">Train Autoencoder</button>
    <button id="evalBtn">Evaluate</button>
    <button id="testFiveBtn">Test 5 Random</button><br>
    <button id="saveBtn">Save Model</button><br>
    <input type="file" id="modelJson"    accept=".json">
    <input type="file" id="modelWeights" accept=".bin">
    <button id="loadBtn">Load Model</button><br>
    <button id="resetBtn">Reset</button>
    <button id="visorBtn">Toggle Visor</button>

    <div id="dataStatus"  class="status"><strong>Data:</strong> not loaded</div>
    <div id="modelStatus" class="status"><strong>Model:</strong> none</div>
  </div>

  <div class="col">
    <h2>Logs</h2>
    <pre id="logs" style="min-height:120px;background:#f8f8f8;border:1px solid #ddd;padding:6px;overflow:auto"></pre>

    <div id="preview-wrapper">
      <h3>Noisy (top) vs Denoised (bottom)</h3>
      <div id="previewNoisy"    class="preview-row"></div>
      <div id="previewDenoised" class="preview-row"></div>
    </div>
  </div>
</div>

<script src="data-loader.js"></script>
<script src="app.js"></script>
</body>
</html>
